name: 'Setup Windows'
description: 'Setup Windows'
runs:
  using: "composite"
  steps:
    - name: Install Windows dependencies
      shell: bash
      run: |
        choco install -y ninja wget
        wget https://github.com/dokan-dev/dokany/releases/download/v1.5.1.1000/Dokan_x64.msi
        if [ $(sha512sum Dokan_x64.msi | awk '{print $1;}') == "492f4560c1505ada9d5c79ad0c098159af473de7567048e7dc48559328c9970641cd5e2eb8f749ce04918a9a0bb1a0bd943915abd686ea8824191c0747fafe1f" ]; then
          echo Correct sha512sum
        else
          echo Wrong sha512sum
          sha512sum Dokan_x64.msi
          exit 1
        fi
        echo Installing DokanY
        msiexec "-i" "Dokan_x64.msi" "-norestart" "-passive" INSTALLDEVFILES=1
        # msiexec "-i" "Dokan_x64.msi" "-norestart" "-passive" "-lv*!" dokan-install-logfile.txt INSTALLDEVFILES=1
        # cat dokan-install-logfile.txt
        echo Installing DokanY finished
